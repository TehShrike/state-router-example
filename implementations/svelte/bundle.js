!function e(t,n,r){function a(i,c){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){(function(n){function r(e){setTimeout(function(){e(null,a())},x)}function a(){return JSON.parse(localStorage.getItem("topics"))}function o(e,t){setTimeout(function(){t(null,i(e))},x)}function i(e){return a().find(function(t){return t.id===e})}function c(e){var t={name:e,id:y()},n=a();return n.push(t),p(t.id,[]),m(n),t}function s(e){var t=a(),r=t.findIndex(function(t){return t.id===e});t.splice(r,1),m(t),n.nextTick(function(){localStorage.removeItem(e)})}function u(e,t){"function"==typeof e&&(t=e,e=null),setTimeout(function(){e?t(null,d(e)):t(null,l())},x)}function l(){var e=a();return e.reduce(function(e,t){var n=t.id;return e[n]=d(n),e},{})}function d(e){var t=localStorage.getItem(e);return t?JSON.parse(localStorage.getItem(e)):[]}function f(e,t){var n=d(e),r={name:t,done:!1};return n.push(r),p(e,n),r}function p(e,t){localStorage.setItem(e,JSON.stringify(t)),w.emit("tasks saved",e)}function m(e){localStorage.setItem("topics",JSON.stringify(e)),w.emit("topics saved")}function h(){return{name:localStorage.getItem("currentUserName")}}function v(e){e?localStorage.setItem("currentUserName",e):localStorage.removeItem("currentUserName")}function g(){console.log("Initializing dummy data");var e={name:"Important stuff",id:y()},t={name:"Not as important",id:y()};m([e,t]),p(e.id,[{name:"Put on pants",done:!1},{name:"Visit chat room to see if you still pass the Turing test",done:!1}]),p(t.id,[{name:"Make cupcakes",done:!0},{name:"Eat cupcakes",done:!0},{name:"Write forum post rant about how chocolate cupcakes are the only good kind of cupcake",done:!1}])}var y=e("random-uuid-v4"),b=e("events").EventEmitter,x=50,w=new b;t.exports=w,w.getTopics=r,w.getTopic=o,w.addTopic=c,w.removeTopic=s,w.getTasks=u,w.saveTasks=p,w.saveTopics=m,w.getCurrentUser=h,w.saveCurrentUser=v,w.saveTask=f,function(){localStorage.getItem("topics")||g()}()}).call(this,e("_process"))},{_process:25,events:29,"random-uuid-v4":40}],2:[function(e,t,n){"use strict";function r(e,t,n){var r=document.createElement("div");r.className="container";var a=document.createElement("div");a.className="row";var o=document.createElement("div");o.className="col-sm-offset-2 col-sm-8";var i=document.createElement("div");i.className="jumbotron";var c=document.createElement("h1");c.appendChild(document.createTextNode("About this example")),i.appendChild(c),o.appendChild(i),a.appendChild(o),r.appendChild(a),r.appendChild(document.createTextNode("\n\t"));var s=document.createElement("div");s.className="row";var u=document.createElement("div");u.className="col-sm-offset-3 col-sm-6";var l=document.createElement("p");return l.appendChild(document.createTextNode("Pretty sweet, isn't it?  Here, let me give some examples or something.")),u.appendChild(l),s.appendChild(u),r.appendChild(s),n.appendChild(r),{update:function(e,t){},teardown:function(e){e&&r.parentNode.removeChild(r)}}}function a(e){function t(e,t,r){for(var a in e)if(a in t){var i=t[a],c=r[a];if(i!==c||"object"===("undefined"==typeof i?"undefined":o(i))){var s=e[a];if(s)for(var u=0;u<s.length;u+=1){var l=s[u];l.__calling||(l.__calling=!0,l.call(n,i,c),l.__calling=!1)}}}}var n=this,a=e.data||{},i={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var n=a;a=Object.assign({},n,e),t(i.immediate,e,n),s&&s.update(e,a),t(i.deferred,e,n)},this.observe=function(e,t,r){var o=r&&r.defer?i.deferred:i.immediate;return(o[e]||(o[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,a[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),s.teardown(e!==!1),s=null,a={}};var s=r(a,this,e.target)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=a},{}],3:[function(e,t,n){"use strict";var r=e("./about.html");t.exports=function(e){e.addState({name:"app.about",route:"/about",template:r})}},{"./about.html":2}],4:[function(e,t,n){"use strict";function r(e,t,n){function r(e){t.fire("logout",e)}var a=document.createElement("nav");a.className="navbar navbar-default";var o=document.createElement("div");o.className="container-fluid";var i=document.createElement("div");i.className="navbar-header";var c=document.createElement("ul");c.className="nav navbar-nav";var s=document.createElement("li");s.className=e.asr.stateIsActive("app.topics")?"active":"";var u=document.createElement("a");u.href=e.asr.makePath("app.topics"),u.appendChild(document.createTextNode("Basic todo app!")),s.appendChild(u),c.appendChild(s),c.appendChild(document.createTextNode("\n\t\t\t\t"));var l=document.createElement("li");l.className=e.asr.stateIsActive("app.about")?"active":"";var d=document.createElement("a");d.href=e.asr.makePath("app.about"),d.appendChild(document.createTextNode("About the state router")),l.appendChild(d),c.appendChild(l),c.appendChild(document.createTextNode("\n\t\t\t\t"));var f=document.createElement("li"),p=document.createElement("a");p.href=e.asr.makePath("login"),p.addEventListener("click",r,!1),p.appendChild(document.createTextNode('"Log out"')),f.appendChild(p),c.appendChild(f),i.appendChild(c),o.appendChild(i),o.appendChild(document.createTextNode("\n\t\t"));var m=document.createElement("div");m.className="nav navbar-right";var h=document.createElement("p");h.className="navbar-text",h.appendChild(document.createTextNode("Logged in as "));var v=document.createTextNode(e.currentUser.name);h.appendChild(v),m.appendChild(h),o.appendChild(m),a.appendChild(o),n.appendChild(a);var g=document.createTextNode("\n\n");n.appendChild(g);var y=document.createElement("uiView");return n.appendChild(y),{update:function(e,t){s.className=t.asr.stateIsActive("app.topics")?"active":"",u.href=t.asr.makePath("app.topics"),l.className=t.asr.stateIsActive("app.about")?"active":"",d.href=t.asr.makePath("app.about"),p.href=t.asr.makePath("login"),v.data=t.currentUser.name},teardown:function(e){e&&a.parentNode.removeChild(a),p.removeEventListener("click",r,!1),e&&g.parentNode.removeChild(g),e&&y.parentNode.removeChild(y)}}}function a(e){function t(e,t,r){for(var a in e)if(a in t){var i=t[a],c=r[a];if(i!==c||"object"===("undefined"==typeof i?"undefined":o(i))){var s=e[a];if(s)for(var u=0;u<s.length;u+=1){var l=s[u];l.__calling||(l.__calling=!0,l.call(n,i,c),l.__calling=!1)}}}}var n=this,a=e.data||{},i={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var n=a;a=Object.assign({},n,e),t(i.immediate,e,n),s&&s.update(e,a),t(i.deferred,e,n)},this.observe=function(e,t,r){var o=r&&r.defer?i.deferred:i.immediate;return(o[e]||(o[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,a[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),s.teardown(e!==!1),s=null,a={}};var s=r(a,this,e.target)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=a},{}],5:[function(e,t,n){"use strict";var r=e("./app.html"),a=e("model.js");t.exports=function(t){t.addState({name:"app",route:"/app",defaultChild:"topics",template:r,resolve:function(e,t,n){var r=a.getCurrentUser();r.name?n(null,{currentUser:r}):n.redirect("login")},activate:function(e){var n=e.domApi;n.on("logout",function(){a.saveCurrentUser(null),t.go("login")})}}),e("./about/about")(t),e("./topics/topics")(t)}},{"./about/about":3,"./app.html":4,"./topics/topics":10,"model.js":1}],6:[function(e,t,n){"use strict";function r(e,t,n){var r=document.createElement("p");r.appendChild(document.createTextNode("This is a very basic todo app\tto show off route states.")),n.appendChild(r);var a=document.createTextNode("\n");n.appendChild(a);var o=document.createElement("p");return o.appendChild(document.createTextNode("Click on one of the topics on the left, and watch both the url and this half of the screen change, without anything else in the dom changing!")),n.appendChild(o),{update:function(e,t){},teardown:function(e){e&&r.parentNode.removeChild(r),e&&a.parentNode.removeChild(a),e&&o.parentNode.removeChild(o)}}}function a(e){function t(e,t,r){for(var a in e)if(a in t){var i=t[a],c=r[a];if(i!==c||"object"===("undefined"==typeof i?"undefined":o(i))){var s=e[a];if(s)for(var u=0;u<s.length;u+=1){var l=s[u];l.__calling||(l.__calling=!0,l.call(n,i,c),l.__calling=!1)}}}}var n=this,a=e.data||{},i={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var n=a;a=Object.assign({},n,e),t(i.immediate,e,n),s&&s.update(e,a),t(i.deferred,e,n)},this.observe=function(e,t,r){var o=r&&r.defer?i.deferred:i.immediate;return(o[e]||(o[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,a[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),s.teardown(e!==!1),s=null,a={}};var s=r(a,this,e.target)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=a},{}],7:[function(e,t,n){"use strict";function r(){var e=document.createElement("style");e.textContent="                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \n\t.done-checkbox[svelte-1091693529]::before, [svelte-1091693529] .done-checkbox::before {\n\t\tmargin-left: .2em;\n\t}\n",document.head.appendChild(e),f=!0}function a(e,t,n){function r(){_=!0,t.set({newTaskName:E.value}),_=!1}function a(e){t.fire("newTaskKeyup",e)}var i=document.createElement("h1");i.setAttribute("svelte-1091693529","");var c=document.createTextNode(e.topic.name);i.appendChild(c),n.appendChild(i);var s=document.createTextNode("\n\n");n.appendChild(s);var u=document.createElement("table");u.setAttribute("svelte-1091693529",""),u.className="table table-striped";var l=document.createElement("thead"),d=document.createElement("tr"),f=document.createElement("th");f.appendChild(document.createTextNode("Task name")),d.appendChild(f),d.appendChild(document.createTextNode("\n\t\t\t"));var p=document.createElement("th");p.style.cssText="width: 100px",p.appendChild(document.createTextNode("Complete")),d.appendChild(p),d.appendChild(document.createTextNode("\n\t\t\t"));var m=document.createElement("th");m.style.cssText="width: 87px",m.appendChild(document.createTextNode("Remove")),d.appendChild(m),l.appendChild(d),u.appendChild(l),u.appendChild(document.createTextNode("\n\t"));var h=document.createElement("tbody"),v=document.createComment("#each tasks");h.appendChild(v);for(var g=e.tasks,y=document.createDocumentFragment(),b=[],x=0;x<g.length;x+=1)b[x]=o(e,g,g[x],x,t,y);v.parentNode.insertBefore(y,v),h.appendChild(document.createTextNode("\n\t\t"));var w=document.createElement("tr"),C=document.createElement("td"),E=document.createElement("input");E.type="text",E.className="form-control add-new-task",E.placeholder="New task";var _=!1;return E.addEventListener("input",r,!1),E.value=e.newTaskName,E.addEventListener("keyup",a,!1),C.appendChild(E),w.appendChild(C),h.appendChild(w),u.appendChild(h),n.appendChild(u),{update:function(e,n){c.data=n.topic.name;for(var r=n.tasks,a=0;a<r.length;a+=1)b[a]?b[a].update(e,n,r,r[a],a):b[a]=o(n,r,r[a],a,t,y);for(var a=r.length;a<b.length;a+=1)b[a].teardown(!0);v.parentNode.insertBefore(y,v),b.length=r.length,_||(E.value=n.newTaskName)},teardown:function(e){e&&i.parentNode.removeChild(i),e&&s.parentNode.removeChild(s),e&&u.parentNode.removeChild(u);for(var t=0;t<b.length;t+=1)b[t].teardown(!1);E.removeEventListener("input",r,!1),E.removeEventListener("keyup",a,!1)}}}function o(e,t,n,r,a,o){function u(e,t,n,r){return n.done?s:null}function l(e,t,n,r){return n.done?c:i}function f(e){var t=this.__svelte.eachBlock_0_value,n=this.__svelte.i;t[n];a.remove(n)}var p=document.createElement("tr"),m=document.createElement("td");m.className=""+d.helpers.ifThenStr(n.done,"text-muted")+" center-y";var h=document.createElement("span");h.className="center-y";var v=document.createTextNode(n.name);h.appendChild(v),h.appendChild(document.createTextNode("\n\t\t\t\t\t\t"));var g=document.createComment("#if task.done");h.appendChild(g);var y=u(e,t,n,r),b=y&&y(e,t,n,r,a,h,g);m.appendChild(h),p.appendChild(m),p.appendChild(document.createTextNode("\n\t\t\t\t"));var x=document.createElement("td"),w=document.createComment("#if task.done");x.appendChild(w);var C=l(e,t,n,r),E=C&&C(e,t,n,r,a,x,w);p.appendChild(x),p.appendChild(document.createTextNode("\n\t\t\t\t"));var _=document.createElement("td"),N=document.createElement("button");return N.className="btn btn-danger full-width",N.addEventListener("click",f,!1),N.__svelte={eachBlock_0_value:t,i:r},N.appendChild(document.createTextNode("Remove")),_.appendChild(N),p.appendChild(_),o.appendChild(p),{update:function(e,t,n,r,o){var r=n[o];m.className=""+d.helpers.ifThenStr(r.done,"text-muted")+" center-y",v.data=r.name;var i=y;y=u(t,n,r,o),i===y&&b?b.update(e,t,n,r,o):(b&&b.teardown(!0),b=y&&y(t,n,r,o,a,h,g));var c=C;C=l(t,n,r,o),c===C&&E?E.update(e,t,n,r,o):(E&&E.teardown(!0),E=C&&C(t,n,r,o,a,x,w)),N.__svelte.eachBlock_0_value=n,N.__svelte.i=o},teardown:function(e){e&&p.parentNode.removeChild(p),b&&b.teardown(e),E&&E.teardown(e),N.removeEventListener("click",f,!1)}}}function i(e,t,n,r,a,o,i){function c(e){var t=this.__svelte.eachBlock_0_value,n=this.__svelte.i;t[n];a.complete(n)}var s=document.createElement("button");return s.className="btn btn-success full-width",s.addEventListener("click",c,!1),s.__svelte={eachBlock_0_value:t,i:r},s.appendChild(document.createTextNode("Complete")),i.parentNode.insertBefore(s,i),{update:function(e,t,n,r,a){s.__svelte.eachBlock_0_value=n,s.__svelte.i=a},teardown:function(e){s.removeEventListener("click",c,!1),e&&s.parentNode.removeChild(s)}}}function c(e,t,n,r,a,o,i){function c(e){var t=this.__svelte.eachBlock_0_value,n=this.__svelte.i;t[n];a.restore(n)}var s=document.createElement("button");return s.className="btn btn-primary full-width",s.addEventListener("click",c,!1),s.__svelte={eachBlock_0_value:t,i:r},s.appendChild(document.createTextNode("Restore")),i.parentNode.insertBefore(s,i),{update:function(e,t,n,r,a){s.__svelte.eachBlock_0_value=n,s.__svelte.i=a},teardown:function(e){s.removeEventListener("click",c,!1),e&&s.parentNode.removeChild(s)}}}function s(e,t,n,r,a,o,i){var c=document.createElement("span");return c.className="glyphicon glyphicon-ok text-success done-checkbox",i.parentNode.insertBefore(c,i),{update:function(e,t,n,r,a){},teardown:function(e){e&&c.parentNode.removeChild(c)}}}function u(e){function t(e,t,r){for(var a in e)if(a in t){var o=t[a],i=r[a];if(o!==i||"object"===("undefined"==typeof o?"undefined":l(o))){var c=e[a];if(c)for(var s=0;s<c.length;s+=1){var u=c[s];u.__calling||(u.__calling=!0,u.call(n,o,i),u.__calling=!1)}}}}var n=this,o=Object.assign(d.data(),e.data),i={immediate:Object.create(null),deferred:Object.create(null)},c=Object.create(null);this.fire=function(e,t){var n=e in c&&c[e].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,t)},this.get=function(e){return e?o[e]:o},this.set=function(e){var n=o;o=Object.assign({},n,e),t(i.immediate,e,n),s&&s.update(e,o),t(i.deferred,e,n)},this.observe=function(e,t,r){var a=r&&r.defer?i.deferred:i.immediate;return(a[e]||(a[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,o[e]),t.__calling=!1),{cancel:function(){var n=a[e].indexOf(t);~n&&a[e].splice(n,1)}}},this.on=function(e,t){var n=c[e]||(c[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),s.teardown(e!==!1),s=null,o={}},f||r();var s=a(o,this,e.target)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){return{data:function(){return{newTaskName:""}},helpers:{ifThenStr:function(e,t){return e?t:""}},methods:{complete:function(e){this.setTaskDone(e,!0)},restore:function(e){this.setTaskDone(e,!1)}}}}(),f=!1;u.prototype=d.methods,t.exports=u},{}],8:[function(e,t,n){"use strict";var r=e("./tasks.html"),a=e("model.js"),o=e("async-all"),i="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}";t.exports=function(t){t.addState({name:"app.topics.tasks",route:"/:topicId("+i+")",template:{component:r,options:{methods:{setTaskDone:function(e,t){var n=this.get("topicId"),r=this.get("tasks").slice();r[e].done=t,this.set({tasks:r}),a.saveTasks(n,r)},remove:function(e){var t=this.get("topicId"),n=this.get("tasks").slice();n.splice(e,1),this.set({tasks:n}),a.saveTasks(t,n)}}}},resolve:function(e,t,n){o({topic:a.getTopic.bind(null,t.topicId),tasks:a.getTasks.bind(null,t.topicId),topicId:t.topicId},n)},activate:function(e){function t(e){var t=a.saveTask(r,e),o=n.get("tasks").concat(t);n.set({tasks:o})}var n=e.domApi,r=e.parameters.topicId;n.on("newTaskKeyup",function(e){var r=n.get("newTaskName");13===e.keyCode&&r&&(t(r),n.set({newTaskName:""}))}),n.mountedToTarget.querySelector(".add-new-task").focus()}}),t.addState({name:"app.topics.no-task",route:"",template:e("./no-task-selected.html")})}},{"./no-task-selected.html":6,"./tasks.html":7,"async-all":24,"model.js":1}],9:[function(e,t,n){"use strict";function r(e,t,n){function r(e){t.fire("add-topic",e)}function o(){C=!0,t.set({newTopic:w.value}),C=!1}var i=document.createElement("div");i.className="container";var s=document.createElement("div");s.className="row";var u=document.createElement("div");u.className="col-sm-4";var l=document.createElement("div");l.className="list-group";var d=document.createComment("#each topics");l.appendChild(d);for(var f=e.topics,p=document.createDocumentFragment(),m=[],h=0;h<f.length;h+=1)m[h]=a(e,f,f[h],h,t,p);d.parentNode.insertBefore(p,d),u.appendChild(l),u.appendChild(document.createTextNode("\n\t\t\t"));var v=document.createElement("form");v.action="",v.setAttribute("onsubmit","return false"),v.addEventListener("submit",r,!1);var g=document.createElement("div");g.className="table";var y=document.createElement("div");y.className="table-row-group";var b=document.createElement("div");b.className="table-row";var x=document.createElement("div");x.className="table-cell";var w=document.createElement("input");w.type="text",w.className="new-topic-name form-control "+c.helpers.hiddenIfNot(e.addingTopic),w.placeholder="Topic name";var C=!1;w.addEventListener("input",o,!1),w.value=e.newTopic,x.appendChild(w),b.appendChild(x),b.appendChild(document.createTextNode("\n\t\t\t\t\t\t\t"));var E=document.createElement("div");E.className="table-cell",E.style.cssText="width: 60px; vertical-align: top";var _=document.createElement("button");_.type="submit",_.className="btn btn-default pull-right",_.appendChild(document.createTextNode("Add")),E.appendChild(_),b.appendChild(E),y.appendChild(b),g.appendChild(y),v.appendChild(g),u.appendChild(v),s.appendChild(u),s.appendChild(document.createTextNode("\n\t\t"));var N=document.createElement("div");N.className="col-sm-8";var T=document.createElement("uiView");return N.appendChild(T),s.appendChild(N),i.appendChild(s),n.appendChild(i),{update:function(e,n){for(var r=n.topics,o=0;o<r.length;o+=1)m[o]?m[o].update(e,n,r,r[o],o):m[o]=a(n,r,r[o],o,t,p);for(var o=r.length;o<m.length;o+=1)m[o].teardown(!0);d.parentNode.insertBefore(p,d),m.length=r.length,w.className="new-topic-name form-control "+c.helpers.hiddenIfNot(n.addingTopic),C||(w.value=n.newTopic)},teardown:function(e){e&&i.parentNode.removeChild(i);for(var t=0;t<m.length;t+=1)m[t].teardown(!1);v.removeEventListener("submit",r,!1),w.removeEventListener("input",o,!1)}}}function a(e,t,n,r,a,o){var i=document.createElement("a");i.href=e.asr.makePath("app.topics.tasks",{topicId:n.id}),i.className="list-group-item "+(e.asr.stateIsActive("app.topics.tasks",{topicId:n.id})?"active":"");var c=document.createTextNode(n.name);i.appendChild(c),i.appendChild(document.createTextNode(" "));var s=document.createElement("span");s.className="badge";var u=document.createTextNode(e.tasksUndone[n.id]);return s.appendChild(u),i.appendChild(s),o.appendChild(i),{update:function(e,t,n,r,a){var r=n[a];i.href=t.asr.makePath("app.topics.tasks",{topicId:r.id}),i.className="list-group-item "+(t.asr.stateIsActive("app.topics.tasks",{topicId:r.id})?"active":""),c.data=r.name,u.data=t.tasksUndone[r.id]},teardown:function(e){e&&i.parentNode.removeChild(i)}}}function o(e){function t(e,t,r){for(var a in e)if(a in t){var o=t[a],c=r[a];if(o!==c||"object"===("undefined"==typeof o?"undefined":i(o))){var s=e[a];if(s)for(var u=0;u<s.length;u+=1){var l=s[u];l.__calling||(l.__calling=!0,l.call(n,o,c),l.__calling=!1)}}}}var n=this,a=Object.assign(c.data(),e.data),o={immediate:Object.create(null),deferred:Object.create(null)},s=Object.create(null);this.fire=function(e,t){var n=e in s&&s[e].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var n=a;a=Object.assign({},n,e),t(o.immediate,e,n),u&&u.update(e,a),t(o.deferred,e,n)},this.observe=function(e,t,r){var i=r&&r.defer?o.deferred:o.immediate;return(i[e]||(i[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,a[e]),t.__calling=!1),{cancel:function(){var n=i[e].indexOf(t);~n&&i[e].splice(n,1)}}},this.on=function(e,t){var n=s[e]||(s[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),u.teardown(e!==!1),u=null,a={}};var u=r(a,this,e.target)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){return{helpers:{hiddenIfNot:function(e){return e?"":"hidden"}},data:function(){return{tasksUndone:{},addingTopic:!1,newTopic:""}}}}();t.exports=o},{}],10:[function(e,t,n){(function(n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=e("./topics.html"),o=e("model.js"),i=e("async-all");t.exports=function(t){t.addState({name:"app.topics",route:"/topics",defaultChild:"no-task",template:a,resolve:function(e,t,n){i({topics:o.getTopics,tasks:o.getTasks},n)},activate:function(e){function a(){n.nextTick(function(){c.mountedToTarget.querySelector(".new-topic-name").focus()})}function i(e){o.getTasks(e,function(t,n){var a=n.reduce(function(e,t){return e+(t.done?0:1)},0);c.set({tasksUndone:Object.assign({},c.get("tasksUndone"),r({},e,a))})})}var c=e.domApi;o.on("tasks saved",i),e.content.topics.forEach(function(e){i(e.id)}),c.on("add-topic",function(){var e=c.get("addingTopic"),n=c.get("newTopic");if(e&&n){var r=o.addTopic(n);c.set({topics:c.get("topics").concat(r),newTopic:""}),i(r.id),t.go("app.topics.tasks",{topicId:r.id})}else e||a();return c.set({addingTopic:!e}),!1}),e.on("destroy",function(){o.removeListener("tasks saved",i)})}}),e("./tasks/tasks")(t)}}).call(this,e("_process"))},{"./tasks/tasks":8,"./topics.html":9,_process:25,"async-all":24,"model.js":1}],11:[function(e,t,n){"use strict";var r=e("abstract-state-router"),a=e("svelte-state-renderer"),o=e("domready");o(function(){var t=r(a(),document.querySelector("body"));t.setMaxListeners(20),e("./login/login")(t),e("./app/app")(t),t.evaluateCurrentRoute("login")})},{"./app/app":5,"./login/login":13,"abstract-state-router":15,domready:28,"svelte-state-renderer":41}],12:[function(e,t,n){"use strict";function r(e,t,n){function r(e){t.fire("login",e)}function a(){x=!0,t.set({username:b.value}),x=!1}var o=document.createElement("div");o.className="container-fluid";var i=document.createElement("div");i.className="row";var c=document.createElement("div");c.className="col-sm-offset-3 col-sm-6";var s=document.createElement("h1");s.appendChild(document.createTextNode("Welcome to the abstract-state-router demo!")),c.appendChild(s),i.appendChild(c),o.appendChild(i),o.appendChild(document.createTextNode("\n\t"));var u=document.createElement("div");u.className="row margin-top-20";var l=document.createElement("div");l.className="col-sm-offset-3 col-sm-6";var d=document.createElement("div");d.className="well";var f=document.createElement("p");f.className="lead",f.appendChild(document.createTextNode("This is a demo webapp showing off basic usage of the "));var p=document.createElement("a");p.href="https://github.com/TehShrike/abstract-state-router",p.appendChild(document.createTextNode("abstract-state-router")),f.appendChild(p),f.appendChild(document.createTextNode(" library using a few different templating libraries.")),d.appendChild(f),l.appendChild(d),u.appendChild(l),o.appendChild(u),o.appendChild(document.createTextNode("\n\t"));var m=document.createElement("div");m.className="row margin-top-20";var h=document.createElement("div");h.className="col-sm-offset-4 col-sm-4";var v=document.createElement("div");v.className="form-group panel";var g=document.createElement("form");g.setAttribute("onsubmit","return false"),g.addEventListener("submit",r,!1),g.className="panel-body",g.action="";var y=document.createElement("label");y.appendChild(document.createTextNode("Put in whatever username you feel like:\n\t\t\t\t\t\t"));var b=document.createElement("input");b.type="text",b.className="form-control";var x=!1;b.addEventListener("input",a,!1),b.value=e.username,y.appendChild(b),g.appendChild(y),g.appendChild(document.createTextNode("\n\t\t\t\t\t"));var w=document.createElement("button");return w.type="submit",w.className="btn btn-primary",w.appendChild(document.createTextNode('"Log in"')),g.appendChild(w),v.appendChild(g),h.appendChild(v),m.appendChild(h),o.appendChild(m),n.appendChild(o),{update:function(e,t){x||(b.value=t.username)},teardown:function(e){e&&o.parentNode.removeChild(o),g.removeEventListener("submit",r,!1),b.removeEventListener("input",a,!1)}}}function a(e){function t(e,t,r){for(var a in e)if(a in t){var i=t[a],c=r[a];if(i!==c||"object"===("undefined"==typeof i?"undefined":o(i))){var s=e[a];if(s)for(var u=0;u<s.length;u+=1){var l=s[u];l.__calling||(l.__calling=!0,l.call(n,i,c),l.__calling=!1)}}}}var n=this,a=Object.assign(i.data(),e.data),c={immediate:Object.create(null),deferred:Object.create(null)},s=Object.create(null);this.fire=function(e,t){var n=e in s&&s[e].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,t)},this.get=function(e){return e?a[e]:a},this.set=function(e){var n=a;a=Object.assign({},n,e),t(c.immediate,e,n),u&&u.update(e,a),t(c.deferred,e,n)},this.observe=function(e,t,r){var o=r&&r.defer?c.deferred:c.immediate;return(o[e]||(o[e]=[])).push(t),r&&r.init===!1||(t.__calling=!0,t.call(n,a[e]),t.__calling=!1),{cancel:function(){var n=o[e].indexOf(t);~n&&o[e].splice(n,1)}}},this.on=function(e,t){var n=s[e]||(s[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},this.teardown=function(e){this.fire("teardown"),u.teardown(e!==!1),u=null,a={}};var u=r(a,this,e.target)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return{data:function(){return{username:""}}}}();t.exports=a},{}],13:[function(e,t,n){"use strict";var r=e("./login.html"),a=e("model.js");t.exports=function(e){e.addState({name:"login",route:"/login",template:r,activate:function(t){var n=t.domApi;n.on("login",function(){var t=n.get("username");return t&&(a.saveCurrentUser(t),e.go("app")),!1})}})}},{"./login.html":12,"model.js":1}],14:[function(e,t,n){t.exports={reverse:!1}},{}],15:[function(e,t,n){(function(n){function r(e,t){var n=m(t);return n.filter(function(t){return e[t]}).reduce(function(t,n){return x(t,e[n])},{})}function a(e,t){return{redirectTo:{name:e,params:t}}}function o(e,t){var n=e.filter(s("resolve")),r=n.map(i("name")),o=Promise.all(n.map(function(e){return new Promise(function(n,r){function o(e,t){e?r(e):n(t)}o.redirect=function(e,t){r(a(e,t))};var i=e.resolve(e.data,t,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||n(i)})}));return o.then(function(e){return C({stateName:r,resolveResult:e}).reduce(function(e,t){return e[t.stateName]=t.resolveResult,e},{})})}function i(e){return function(t){return t[e]}}function c(e){return e.slice().reverse()}function s(e){return function(t){return"function"==typeof t[e]}}function u(){var e=Array.prototype.shift.apply(arguments),t=arguments;return new Promise(function(n){n(e.apply(null,t))})}var l=e("./lib/state-state"),d=e("./lib/state-comparison"),f=e("./lib/current-state"),p=e("./lib/state-change-logic"),m=e("./lib/state-string-parser"),h=e("./lib/state-transition-manager"),v=e("./default-router-options.js"),g=e("./lib/promise-map-series"),y=e("then-denodeify"),b=e("events").EventEmitter,x=e("xtend"),w=e("hash-brown-router"),C=e("combine-arrays"),E=e("page-path-builder");e("native-promise-only/npo");var _=["name","route","defaultChild","data","template","resolve","activate","querystringParameters","defaultQuerystringParameters","defaultParameters"];t.exports=function(e,t,i){function s(e,t){n.nextTick(function(){if(B.emit(e,t),console.error(e+" - "+t.message),i.throwOnError)throw t})}function m(e){var t=I.get(e);return B.emit("beforeDestroyState",{state:t,domApi:$[e]}),K[e].emit("destroy"),K[e].removeAllListeners(),delete K[e],delete J[e],q($[e]).then(function(){delete $[e],
B.emit("afterDestroyState",{state:t})})}function C(e,t){var n=$[t],a=r(J,t),o=I.get(t);return B.emit("beforeResetState",{domApi:n,content:a,state:o,parameters:e}),K[t].emit("destroy"),delete K[t],M({domApi:n,content:a,template:o.template,parameters:e}).then(function(n){n&&($[t]=n),B.emit("afterResetState",{domApi:$[t],content:a,state:o,parameters:e})})}function N(e){return new Promise(function(n){var r=I.getParent(e);if(r){var a=$[r.name];n(D(a))}else n(t)})}function T(e,t){return N(t).then(function(n){var a=I.get(t),o=r(J,t);return B.emit("beforeCreateState",{state:a,content:o,parameters:e}),F({element:n,template:a.template,content:o,parameters:e}).then(function(n){return $[t]=n,B.emit("afterCreateState",{state:a,domApi:n,content:o,parameters:e}),n})})}function k(e,t){return g(e,T.bind(null,t))}function j(e,t){try{var n=I.applyDefaultChildStates(e.name);if(n===e.name)A(n,t);else{var r=P(n,t),a=i.router.location.get();r===a?A(n,t):B.go(n,t,{replace:!0})}}catch(e){s("stateError",e)}}function S(e){if("undefined"==typeof e)throw new Error("Expected 'state' to be passed in.");if("undefined"==typeof e.name)throw new Error("Expected the 'name' option to be passed in.");if("undefined"==typeof e.template)throw new Error("Expected the 'template' option to be passed in.");Object.keys(e).filter(function(e){return _.indexOf(e)===-1}).forEach(function(e){console.warn("Unexpected property passed to addState:",e)}),I.add(e.name,e);var t=I.buildFullStateRoute(e.name);i.router.add(t,j.bind(null,e))}function O(e){return e.change.concat(e.create).map(I.get)}function A(e,t){B.emit("stateChangeAttempt",function(n){L(e,t,n)})}function L(e,t,i){function l(t){return function(){if(i.cancelled){var n=new Error("The transition to "+e+"was cancelled");throw n.wasCancelledBySomeoneElse=!0,n}return t.apply(null,arguments)}}return u(I.guaranteeAllStatesExist,e).then(function(){var n=I.get(e),r=n.defaultParameters||n.defaultQuerystringParameters||{},o=Object.keys(r).some(function(e){return"undefined"==typeof t[e]});if(o)throw a(e,x(r,t));return n}).then(l(function(e){B.emit("stateChangeStart",e,t),R.set(e.name,t)})).then(function(){var n=d(I)(U.get().name,U.get().parameters,e,t);return p(n)}).then(l(function(e){function a(e){return e.map(I.get).forEach(function(e){var a=new b,o=Object.create(a);o.domApi=$[e.name],o.data=e.data,o.parameters=t,o.content=r(J,e.name),K[e.name]=a;try{e.activate&&e.activate(o)}catch(e){n.nextTick(function(){throw e})}})}return o(O(e),x(t)).catch(function(e){throw e.stateChangeError=!0,e}).then(l(function(n){function r(){var t=e.change.concat(e.create);return a(t)}return i.cancellable=!1,J=x(J,n),g(c(e.destroy),m).then(function(){return g(c(e.change),C.bind(null,x(t)))}).then(function(){return k(e.create,x(t)).then(r)})}))})).then(function(){U.set(e,t);try{B.emit("stateChangeEnd",I.get(e),t)}catch(e){s("stateError",e)}}).catch(l(function(e){return e&&e.redirectTo?(B.emit("stateChangeCancelled",e),B.go(e.redirectTo.name,e.redirectTo.params,{replace:!0})):void(e&&s("stateChangeError",e))})).catch(function(e){if(!e||!e.wasCancelledBySomeoneElse)throw new Error("This probably shouldn't happen, maybe file an issue or something "+e)})}function P(e,t,n){function r(){if(!R.get().name)throw new Error("makePath required a previous state to exist, and none was found");return R.get()}n&&n.inherit&&(t=x(r().parameters,t));var a=null===e?r().name:e,o=I.get(a)||{},i=o.defaultParameters||o.defaultQuerystringParameters;t=x(i,t),I.guaranteeAllStatesExist(a);var c=I.buildFullStateRoute(a);return E(c,t||{})}var I=l(),U=f(),R=f(),B=new b;h(B),i=x({throwOnError:!0,pathPrefix:"#"},i),i.router||(i.router=w(v)),i.router.setDefault(function(e,t){B.emit("routeNotFound",e,t)});var q=null,D=null,F=null,M=null,$={},J={},K={},V={replace:!1};B.addState=S,B.go=function(e,t,n){n=x(V,n);var r=n.replace?i.router.replace:i.router.go;return u(P,e,t,n).then(r,s.bind(null,"stateChangeError"))},B.evaluateCurrentRoute=function(e,t){return u(P,e,t).then(function(e){i.router.evaluateCurrent(e)}).catch(function(e){s("stateError",e)})},B.makePath=function(e,t,n){return i.pathPrefix+P(e,t,n)},B.stateIsActive=function(e,t){var n=U.get();return(n.name===e||0===n.name.indexOf(e+"."))&&("undefined"==typeof t||Object.keys(t).every(function(e){return t[e]===n.parameters[e]}))};var Q=e(B);return q=y(Q.destroy),D=y(Q.getChildElement),F=y(Q.render),M=y(Q.reset),B}}).call(this,e("_process"))},{"./default-router-options.js":14,"./lib/current-state":16,"./lib/promise-map-series":17,"./lib/state-change-logic":18,"./lib/state-comparison":19,"./lib/state-state":20,"./lib/state-string-parser":21,"./lib/state-transition-manager":22,_process:25,"combine-arrays":26,events:29,"hash-brown-router":31,"native-promise-only/npo":33,"page-path-builder":34,"then-denodeify":42,xtend:43}],16:[function(e,t,n){t.exports=function(){var e={name:"",parameters:{}};return{get:function(){return e},set:function(t,n){e={name:t,parameters:n}}}}},{}],17:[function(e,t,n){var r=e("native-promise-only/npo");t.exports=function(e,t,n){var a=r.resolve(),o=arguments.length>2?t.bind(n):t,i=e.map(function(t,n){return a=a.then(function(n){return o(t,n,e)}.bind(null,n))});return r.all(i)}},{"native-promise-only/npo":33}],18:[function(e,t,n){t.exports=function(e){var t=!1,n=!1,r={destroy:[],change:[],create:[]};return e.forEach(function(e){t=t||e.stateParametersChanged,n=n||e.stateNameChanged,e.nameBefore&&(n?r.destroy.push(e.nameBefore):t&&r.change.push(e.nameBefore)),e.nameAfter&&n&&r.create.push(e.nameAfter)}),r}},{}],19:[function(e,t,n){function r(){var e={};return function(t){return t?(e[t]||(e[t]=s(t).keys.map(function(e){return e.name})),e[t]):[]}}function a(e,t,n,r,a){var o=e.get(n),i=o.querystringParameters||[],c=t(o.route).concat(i);return Array.isArray(c)&&c.some(function(e){return r[e]!==a[e]})}function o(e,t,n,r,a){var o=c({start:i(t),end:i(r)});return o.map(function(t){return{nameBefore:t.start,nameAfter:t.end,stateNameChanged:t.start!==t.end,stateParametersChanged:t.start===t.end&&e(t.start,n,a)}})}var i=e("./state-string-parser"),c=e("combine-arrays"),s=e("path-to-regexp-with-reversible-keys");t.exports=function(e){var t=r(),n=a.bind(null,e,t);return o.bind(null,n)}},{"./state-string-parser":21,"combine-arrays":26,"path-to-regexp-with-reversible-keys":36}],20:[function(e,t,n){var r=e("./state-string-parser"),a=e("./state-string-parser");t.exports=function(){function e(e){var t=r(e);return t.map(function(e){if(!s[e])throw new Error("State "+e+" not found");return s[e]})}function t(e){var t=n(e);return t&&s[t]}function n(e){var t=r(e);if(t.length>1){var n=t.length-2;return t[n]}return null}function o(e){var t=a(e),n=t.filter(function(e){return!s[e]});if(n.length>0)throw new Error("State "+n[n.length-1]+" does not exist")}function i(t){return e(t).map(function(e){return"/"+(e.route||"")}).join("").replace(/\/{2,}/g,"/")}function c(e){function t(){return n&&("function"==typeof n.defaultChild?n.defaultChild():n.defaultChild)}var n=s[e],r=t();if(!r)return e;var a=e+"."+r;return c(a)}var s={};return{add:function(e,t){s[e]=t},get:function(e){return e&&s[e]},getHierarchy:e,getParent:t,getParentName:n,guaranteeAllStatesExist:o,buildFullStateRoute:i,applyDefaultChildStates:c}}},{"./state-string-parser":21}],21:[function(e,t,n){t.exports=function(e){return e.split(".").reduce(function(e,t){return e.length&&(t=e[e.length-1]+"."+t),e.push(t),e},[])}},{}],22:[function(e,t,n){t.exports=function(e){function t(){i=null,c&&r()}function n(){return!!i}function r(){i=c,c=null,i.beginStateChange()}function a(){i.transition.cancelled=!0;var t=new Error("State transition cancelled by the state transition manager");t.wasCancelledBySomeoneElse=!0,e.emit("stateChangeCancelled",t)}function o(e){var t={cancelled:!1,cancellable:!0};return{transition:t,beginStateChange:e.bind(null,t)}}var i=null,c=null;e.on("stateChangeAttempt",function(e){c=o(e),n()&&i.transition.cancellable?a():n()||r()}),e.on("stateChangeError",t),e.on("stateChangeCancelled",t),e.on("stateChangeEnd",t)}},{}],23:[function(e,t,n){!function(e){if(!Array.prototype.find){var t=function(e){var t=Object(this),n=t.length<0?0:t.length>>>0;if(0!==n){if("function"!=typeof e||"[object Function]"!==Object.prototype.toString.call(e))throw new TypeError("Array#find: predicate must be a function");for(var r,a=arguments[1],o=0;o<n;o++)if(r=t[o],e.call(a,r,o,t))return r}};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:t,configurable:!0,enumerable:!1,writable:!0})}catch(e){}Array.prototype.find||(Array.prototype.find=t)}}(this)},{}],24:[function(e,t,n){(function(e){t.exports=function(t,n){function r(){function t(){"function"==typeof n&&(u?n(u):n(null,s))}i?e.nextTick(t):t()}function a(){0!==c||o||(r(),o=!0)}var o=!1,i=!0,c=0,s={},u=null;if(!t||"object"!=typeof t||Array.isArray(t))throw new Error("async-all requires you to pass in an object!");Object.keys(t).forEach(function(e){var n=!1;"function"==typeof t[e]?(c++,t[e](function(t,r){n||(n=!0,c--,u||(t?u=t:s[e]=r),a())})):s[e]=t[e]}),a(),i=!1}}).call(this,e("_process"))},{_process:25}],25:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===a||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function c(){v&&m&&(v=!1,m.length?h=m.concat(h):g=-1,h.length&&s())}function s(){if(!v){var e=o(c);v=!0;for(var t=h.length;t;){for(m=h,h=[];++g<t;)m&&m[g].run();g=-1,t=h.length}m=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{f="function"==typeof clearTimeout?clearTimeout:a}catch(e){f=a}}();var m,h=[],v=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],26:[function(e,t,n){t.exports=function(e){function t(t){var r={};return n.forEach(function(n){r[n]=e[n][t]}),r}var n=Object.keys(e);n.forEach(function(t){if(!Array.isArray(e[t]))throw new Error(t+" is not an array")});for(var r=n.reduce(function(t,n){var r=e[n].length;return t>r?t:r},0),a=[],o=0;o<r;++o)a.push(t(o));return a}},{}],27:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof n?t.exports=r():e.deepmerge=r()}(this,function(){function e(e){var t=e&&"object"==typeof e;return t&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){var a=r&&r.clone===!0;return a&&e(n)?o(t(n),n,r):n}function r(t,r,a){var i=t.slice();return r.forEach(function(r,c){"undefined"==typeof i[c]?i[c]=n(r,a):e(r)?i[c]=o(t[c],r,a):t.indexOf(r)===-1&&i.push(n(r,a))}),i}function a(t,r,a){var i={};return e(t)&&Object.keys(t).forEach(function(e){i[e]=n(t[e],a)}),Object.keys(r).forEach(function(c){e(r[c])&&t[c]?i[c]=o(t[c],r[c],a):i[c]=n(r[c],a)}),i}function o(e,t,o){var i=Array.isArray(t),c=o||{arrayMerge:r},s=c.arrayMerge||r;return i?Array.isArray(e)?s(e,t,o):n(t,o):a(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return o(e,n,t)})},o})},{}],28:[function(e,t,n){!function(e,n){"undefined"!=typeof t?t.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[e]=n()}("domready",function(){var e,t=[],n=document,r=n.documentElement.doScroll,a="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(a,e=function(){for(n.removeEventListener(a,e),o=1;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}})},{}],29:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,s,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],c(n))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),s=1;s<r;s++)o[s-1]=arguments[s];n.apply(this,o)}else if(i(n)){for(r=arguments.length,o=new Array(r-1),s=1;s<r;s++)o[s-1]=arguments[s];for(u=n.slice(),r=u.length,s=0;s<r;s++)u[s].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!a(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var n;n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,c;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(c=o;c-- >0;)if(n[c]===t||n[c].listener&&n[c].listener===t){r=c;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?a(e._events[t])?1:e._events[t].length:0}},{}],30:[function(e,t,n){function r(e,t){e.location.replace(a(e.location.href)+"#"+t)}function a(e){var t=e.indexOf("#");return t===-1?e:e.substring(0,t)}function o(e,t){e.location.hash=t}function i(e,t){var n=c(e.location.hash);return t?decodeURI(n):n}function c(e){return e&&"#"===e[0]?e.substr(1):e}function s(){var e=document.createElement("a");return e.href="#x x",!/x x/.test(e.hash)}var u=e("events").EventEmitter;t.exports=function(e){var t=new u,n="",a=s();return e.addEventListener("hashchange",function(){n!==t.get()&&(n=t.get(),t.emit("hashchange"))}),t.go=o.bind(null,e),t.replace=r.bind(null,e),t.get=i.bind(null,e,a),t}},{events:29}],31:[function(e,t,n){function r(e,t,n){o(e,t.get(),n)}function a(e){var t=e.split("?");return{path:t.shift(),queryString:p.parse(t.join(""))}}function o(e,t,n){var r=a(t);t=r.path;var o=r.queryString,s=(n?i(e):e).find("".match,t);if(s){var u=s.exec(t),l=c(s.keys,u),d=m(o,l);s.fn(d)}else e.defaultFn&&e.defaultFn(t,o)}function i(e){return e.slice().reverse()}function c(e,t){return e.reduce(function(e,n,r){return e[n.name]=t[r+1],e},{})}function s(e,t,n){if("function"!=typeof n)throw new Error("The router add function must be passed a callback function");var r=f(t);r.fn=n,e.push(r)}function u(e,t,n,a){if(t.get()){var o=e.slice();o.defaultFn=function(){t.go(a)},r(o,t,n)}else t.go(a)}function l(e,t){e.defaultFn=t}function d(e){return e&&e.go&&e.replace&&e.on}var f=e("path-to-regexp-with-reversible-keys"),p=e("querystring"),m=e("xtend"),h=e("./hash-location.js");e("array.prototype.find"),t.exports=function(e,t){function n(){t.removeListener("hashchange",o)}d(e)&&(t=e,e=null),e=e||{},t||(t=h(window));var a=[],o=r.bind(null,a,t,!!e.reverse);return t.on("hashchange",o),{add:s.bind(null,a),stop:n,evaluateCurrent:u.bind(null,a,t,!!e.reverse),setDefault:l.bind(null,a),replace:t.replace,go:t.go,location:t}}},{"./hash-location.js":30,"array.prototype.find":23,"path-to-regexp-with-reversible-keys":36,querystring:39,xtend:43}],32:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],33:[function(e,t,n){(function(e){!function(e,n,r){n[e]=n[e]||r(),"undefined"!=typeof t&&t.exports?t.exports=n[e]:"function"==typeof define&&define.amd&&define(function(){return n[e]})}("Promise","undefined"!=typeof e?e:this,function(){"use strict";function e(e,t){f.add(e,t),d||(d=m(f.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,n,r){var a,o;try{n===!1?r.reject(e.msg):(a=n===!0?e.msg:n.call(void 0,e.msg),a===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=t(a))?o.call(a,r.resolve,r.reject):r.resolve(a))}catch(e){r.reject(e)}}function a(r){var i,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(i=t(r))?e(function(){var e=new c(s);try{i.call(r,function(){a.apply(e,arguments)},function(){o.apply(e,arguments)})}catch(t){o.call(e,t)}}):(s.msg=r,s.state=1,s.chain.length>0&&e(n,s))}catch(e){o.call(new c(s),e)}}}function o(t){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=t,r.state=2,r.chain.length>0&&e(n,r))}function i(e,t,n,r){for(var a=0;a<t.length;a++)!function(a){e.resolve(t[a]).then(function(e){n(a,e)},r)}(a)}function c(e){this.def=e,this.triggered=!1}function s(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new s(this);this.then=function(t,a){var o={success:"function"!=typeof t||t,failure:"function"==typeof a&&a};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),r.chain.push(o),0!==r.state&&e(n,r),o.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){a.call(r,e)},function(e){o.call(r,e)})}catch(e){o.call(r,e)}}var l,d,f,p=Object.prototype.toString,m="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),l=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:r!==!1})}}catch(e){l=function(e,t,n){return e[t]=n,e}}f=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,r;return{add:function(a,o){r=new e(a,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var e=t;for(t=n=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var h=l({},"constructor",u,!1);return u.prototype=h,l(h,"__NPO__",0,!1),l(u,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),l(u,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),l(u,"all",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var a=e.length,o=Array(a),c=0;i(t,e,function(e,t){o[e]=t,++c===a&&n(o)},r)})}),l(u,"race",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");i(t,e,function(e,t){n(t)},r)})}),u})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,n){function r(e,t,n){var r=a(t,n);return 0===Object.keys(r).length?e:e+"?"+i(r)}function a(e,t){var n=t.reduce(function(e,t){return t.string||(e[t.name]=t),e},{});return Object.keys(e).filter(function(e){return!n[e]}).reduce(function(t,n){return t[n]=e[n],t},{})}var o=e("./path-parser"),i=e("querystring").stringify;t.exports=function(e,t){var n="string"==typeof e?o(e):e,a=n.allTokens,i=n.regex;if(t){var c=a.map(function(n){if(n.string)return n.string;var r="undefined"!=typeof t[n.name];if(!n.optional&&!r)throw new Error("Must supply argument "+n.name+" for path "+e);return r?n.delimiter+encodeURIComponent(t[n.name]):""}).join("");if(!i.test(c))throw new Error("Provided arguments do not match the original arguments");return r(c,t,a)}return n}},{"./path-parser":35,querystring:39}],35:[function(e,t,n){var r=e("path-to-regexp-with-reversible-keys");t.exports=function(e){var t=r(e);return{regex:t,allTokens:t.allTokens}}},{"path-to-regexp-with-reversible-keys":36}],36:[function(e,t,n){function r(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function a(e,t,n){return e.keys=t,e.allTokens=n,e}function o(e){return e.sensitive?"":"i"}function i(e,t,n){var r=e.source.match(/\((?!\?)/g);if(r)for(var o=0;o<r.length;o++)t.push({name:o,delimiter:null,optional:!1,repeat:!1});return a(e,t,n)}function c(e,t,n,r){for(var i=[],c=0;c<e.length;c++)i.push(u(e[c],t,n,r).source);var s=new RegExp("(?:"+i.join("|")+")",o(n));return a(s,t,r)}function s(e,t,n){function a(e){0===c&&"/"!==e[0]&&(e="/"+e),n.push({string:e})}function o(o,s,u,l,d,f,p,m,h){if(s)return s;if(m)return"\\"+m;var v="+"===p||"*"===p,g="?"===p||"*"===p;h>c&&a(e.substring(c,h)),c=h+o.length;var y={name:l||i++,delimiter:u||"/",optional:g,repeat:v};return t.push(y),n.push(y),u=u?"\\"+u:"",d=r(d||f||"[^"+(u||"\\/")+"]+?"),v&&(d=d+"(?:"+u+d+")*"),g?"(?:"+u+"("+d+"))?":u+"("+d+")"}var i=0,c=0,s=e.replace(d,o);return c<e.length&&a(e.substring(c)),s}function u(e,t,n,r){if(t=t||[],r=r||[],l(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp)return i(e,t,n,r);if(l(e))return c(e,t,n,r);var u=n.strict,d=n.end!==!1,f=s(e,t,r),p="/"===e.charAt(e.length-1);return u||(f=(p?f.slice(0,-2):f)+"(?:\\/(?=$))?"),f+=d?"$":u&&p?"":"(?=\\/|$)",a(new RegExp("^"+f,o(n)),t,r)}var l=e("isarray");t.exports=u;var d=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g")},{isarray:32}],37:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var c=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var d,f,p,m,h=e[l].replace(c,"%20"),v=h.indexOf(n);v>=0?(d=h.substr(0,v),f=h.substr(v+1)):(d=h,f=""),p=decodeURIComponent(d),m=decodeURIComponent(f),r(i,p)?a(i[p])?i[p].push(m):i[p]=[i[p],m]:i[p]=m}return i};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],38:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,c){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var c=encodeURIComponent(a(i))+n;return o(e[i])?r(e[i],function(e){return c+encodeURIComponent(a(e))}).join(t):c+encodeURIComponent(a(e[i]))}).join(t):c?encodeURIComponent(a(c))+n+encodeURIComponent(a(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],39:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":37,"./encode":38}],40:[function(e,t,n){t.exports=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}},{}],41:[function(e,t,n){"use strict";var r=e("deepmerge");t.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){function n(e,n){function i(){d.set({asr:a})}var c=e.element,s=e.template,u=e.content,l=r(o,{target:c,data:Object.assign(u,o.data)}),d=void 0;try{if("function"==typeof s)d=new s(l);else{var f=r(l,s.options);d=new s.component(f),Object.assign(d,f.methods)}}catch(e){return void n(e)}t.on("stateChangeEnd",i),d.on("teardown",function(){t.removeListener("stateChangeEnd",i)}),d.mountedToTarget=c,n(null,d)}var a={makePath:t.makePath,stateIsActive:t.stateIsActive},o=r(e,{data:{asr:a}});return{render:n,reset:function(e,t){var r=e.domApi,a=r.mountedToTarget;r.teardown();var o=Object.assign({},e,{element:a});n(o,t)},destroy:function(e,t){e.teardown(),t()},getChildElement:function(e,t){try{var n=e.mountedToTarget,r=n.querySelector("uiView");t(null,r)}catch(e){t(e)}}}}}},{deepmerge:27}],42:[function(e,t,n){t.exports=function(e){return function(){var t=this,n=Array.prototype.slice.call(arguments);return new Promise(function(r,a){n.push(function(e,t){e?a(e):r(t)});var o=e.apply(t,n),i=o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof o.then;i&&r(o)})}}},{}],43:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)a.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var a=Object.prototype.hasOwnProperty},{}]},{},[11]);